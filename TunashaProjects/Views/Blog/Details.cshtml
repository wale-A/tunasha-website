@model TunashaProjects.Models.Post
@using TunashaProjects.Misc;

@{
    ViewBag.Title = "Details";
}

<div>
    <h2>@Html.DisplayFor(model => model.Title)</h2>

    <hr />
    <p>@Html.TextFormatter(Model.Content)</p>
    <br />
    <div class="row">
        @foreach (var image in Model.Images)
        {
            <div class="col-sm-6">
                <div class="thumbnail">
                    @Html.ImageFormatter(image)
                    <div class="caption">
                        <p class="text-muted">@image.Text</p>
                    </div>
                </div>
            </div>
        }
    </div>
    <br />
    <p class="text-success   pull-right">@Model.PostedBy.Name - - @Model.Date</p>
</div>

<br />

@if (!Model.DisableComment)
{
    <div>
        @*//Html.Hidden("postID", Model.PostID);
            //Html.RenderPartial("_AddComment");*@
        @using (Html.BeginForm("AddComment", "Posts", new { postID = Model.PostID }, FormMethod.Post))
        {
            @Html.AntiForgeryToken()

            <div id="comment-section" class="form-group col-sm-12">
                <input type="text" class="form-control" name="name" placeholder="your name" required> <br />
                <textarea class="form-control" width="100%" name="comment" placeholder="your comment" required></textarea>
            </div>

            <div class="form-group">
                <div class="col-md-offset-2 col-md-10">
                    <input type="submit" value="Add Comment" class="btn btn-info" />
                </div>
            </div>
        }
    </div>
}
<br />
<br />
@foreach (var comment in Model.Comments)
{
    <div class="panel panel-info">
        <div class="panel-body">
            <p>@comment.Text</p>
        </div>
        <div class="panel-footer">
            <span class="text-muted">@comment.Name - @comment.Date</span>

            @if (Request.IsAuthenticated)
            {
                @Html.ActionLink("delete", "DeleteComment", new { commentID = comment.CommentID, postID = Model.PostID }, new { @class = "text-danger pull-right" });
            }
        </div>
    </div>
}

<p>
    @Html.ActionLink("Edit", "Edit", new { id = Model.PostID }) |
    @Html.ActionLink("Back to List", "Index")
</p>
