@model TunashaProjects.Models.Question
@using TunashaProjects.Misc;

@{
    ViewBag.Title = "Details";
}

<h2>Details</h2>

<div>
    <h4>Question</h4>
    <hr />
        <p>
            @Html.DisplayFor(model => model.Text)
        </p>
        <p>
            @Html.DisplayFor(model => model.Name)
            @Html.DisplayFor(model => model.Email)
            @Html.DisplayFor(model => model.Date)
        </p>

    @foreach (var item in Model.Replies)
    {
        <div class="panel panel-default">
            @*<div class="panel-heading">
                    <p class="panel-title lead">@Html.ActionLink(item.MiniText, "Details", new { id = item.PostID }) </p>
                </div>*@
            <div class="panel-body">
                <p>@Html.TextFormatter(item.Text)</p>
            </div>
            <div class="panel-footer">
                <p class="text-muted">@item.Name -- @item.Date</p>
            </div>

        </div>
    }

    @if (Request.IsAuthenticated){
        
        using (Html.BeginForm("AddReply", "Forum", new { questionId = Model.ID }, FormMethod.Post))
        {
            @Html.HiddenFor(model => model.ID);
            @Html.AntiForgeryToken()
            <div class="form-horizontal">
                <h4>Reply</h4>
                <hr />
                <div class="form-group col-xs-12">
                    @*<label class="col-sm-2"> Reply :</label>*@
                    <div class="col-sm-10 col-sm-offset-1">
                        <textarea name="reply" class="form-control"></textarea>
                    </div>
                </div>

                <div class="form-group">
                    <div class="col-md-offset-2 col-md-6">
                        <input type="submit" value="Answer" class="btn btn-default" />
                    </div>
                </div>
            </div>
        }

    }
    
</div>
<p>
    @Html.ActionLink("Back to List", "Index")
</p>
